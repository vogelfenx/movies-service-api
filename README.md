# Предыстория
## Проектная работа 4 спринта

**Важное сообщение для тимлида:** для ускорения проверки проекта укажите ссылку на приватный репозиторий с командной работой в файле readme и отправьте свежее приглашение на аккаунт [BlueDeep](https://github.com/BigDeepBlue).

В папке **tasks** ваша команда найдёт задачи, которые необходимо выполнить в первом спринте второго модуля.  Обратите внимание на задачи **00_create_repo** и **01_create_basis**. Они расцениваются как блокирующие для командной работы, поэтому их необходимо выполнить как можно раньше.

Мы оценили задачи в стори поинтах, значения которых брались из [последовательности Фибоначчи](https://ru.wikipedia.org/wiki/Числа_Фибоначчи) (1,2,3,5,8,…).

Вы можете разбить имеющиеся задачи на более маленькие, например, распределять между участниками команды не большие куски задания, а маленькие подзадачи. В таком случае не забудьте зафиксировать изменения в issues в репозитории.

**От каждого разработчика ожидается выполнение минимум 40% от общего числа стори поинтов в спринте.**

# Запуск проекта
1. Перейти в директорию ./fastapi-solutions

2. Создать файл .env по примеру из env.sample (можно просто переименовать)

3. Выполнить в оболочке команду:
```docker compose up``` . Проект развернется (дождаться логов работающего ETL)

## После запуска
1. При поднятии проекта автоматически загружается данные из sqlite в postgres

2. Postgres пока еще не выпилил из проекта, пригодится при разработке ETL для жанров и персоналий.

3. Каждые 10 сек данные из postgres переливаются в elastic. Корректность переливки данных можно проверить тестами Postman из S3, файл с тестами лежит в fastapi-solution/etl/tests/

4. Для удобства оставил открытыми порты на postgres (5432), elastic (9200)

5. Сервис FastAPI доступен на порту 8008

## Проверить готовность стенда

1. В postgres (localhost:5432):
     * ```sql 
       select * from content.film_work where id = '3d825f60-9fff-4dfe-b294-1a45fa1e115d'```
2. В браузере:
     * http://127.0.0.1:9200/movies/_doc/3d825f60-9fff-4dfe-b294-1a45fa1e115d
3. В браузере:
     * http://127.0.0.1:8008/api/v1/films/3d825f60-9fff-4dfe-b294-1a45fa1e115d

# TODO
